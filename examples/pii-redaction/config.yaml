server:
  listenParams:
    - address: ":8092"
      protocol: "https"
      tls:
        enabled: true
        cert_file: "../../build/certs/server.crt"
        key_file: "../../build/certs/server.key"
        min_version: "1.2"

pipelines:
  - id: pii-redaction
    description: "Redacts PII from request bodies."
    agentId: "*"
    protocol: http
    nodes:
      - id: redact-pii
        type: dlp
        config:
          rules_file: "examples/pii-redaction/dlp_rules.yaml" # Loads from current directory
          deidentify_template: "*****"
          scope: "request"
        on:
          success: egress
          failure: egress # Fail open for this example, or route to error

      - id: egress
        type: egress
        config:
          upstream_url: "https://httpbin.org/anything"
        on:
          success: ""
