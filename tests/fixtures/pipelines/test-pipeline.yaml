id: yaml-test-pipeline
version: 1
agentId: yaml-test-agent
protocol: http
defaults:
  timeoutMs: 5000
nodes:
  - id: auth
    type: auth.jwt.validate
    posture: fail-closed
    on:
      success: egress
      failure: deny
  - id: egress
    type: egress.http
    config:
      upstream_url: http://example.com
    on:
      success: allow
  - id: allow
    type: terminal.allow
  - id: deny
    type: terminal.deny
